<html>
<head>
<meta content="width=device-width,initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="yes" name="apple-mobile-web-app-capable">
<meta content="telephone=no" name="format-detection">
<meta content="black" name="apple-mobile-web-app-status-bar-style">
<meta charset="UTF-8">
<title>演艺邦-微信公众号</title>
<link rel="stylesheet" href="css/style.css">
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/config.js"></script>
</head>
<body>
<section class="pub">
    <div class="pub_box">
        <form action="" method="post" id="form">
            <div class="pub_title">发布信息</div>
            <div class="pub_form">
                <table><tr><td><input type="radio" name="pub" value="0" checked/> <span>发招募</span> <input type="radio" name="pub" value="1" style="margin-left: 20px;"/> <span>发求职</span></td></tr></table>
                <select class="tags" name="tag" id="tags"></select>
                <input type="text" class="pf_title" placeholder="请输入题目，题目最长18字" name="title"/>
                <textarea class="pf_content" rows="6" name="description" id="description"></textarea>
                <div class="pf_limit"><span class="limit">还可以输入<span id="limit">200</span>字</span></div>
                <div class="pub_btns">
                    <span class="upload_btn" id="uploadBtn"><img src="images/upload.jpg"/><span>添加图片</span></span>
                    <input type="hidden" name="file" value=""/>
                    <!-- <em>上传至90%</em> -->
                    <input type="submit" value="发布" class="publish_btn"/>
                </div>
            </div>
        </form>
    </div>
</section>
<script>
    //标签接口 TODO
//    HeadStr.get($, '', null, function(data){
//        var tags = data.tags;
        var tags = ['演员', '艺人', '歌手'];
        var tagsHtml = '';

        for(var i=0;i<tags.length;i++){
            tagsHtml += '<option>'+tags[i]+'</option>';
        }
//    });

    $('#tags').html(tagsHtml);
    $('#description').on('keyup', function(){
        var val = $(this).val();
        var limit = 200;
        var now = val.length;
        var showLength = limit-now;

        if(showLength >= 0){
            $('#limit').html(showLength);
        }else{
            $(this).val(val.substr(0, limit));
            $('#limit').html(0);
        }
    });
    $('#form').submit(function(){
        var title = $('input[name="title"]').val();
        var description = $('textarea[name="description"]').val();

        if(!title || !description){
            HeadStr.popMsg('题目和描述不能为空');
            return false;
        }else if(title.length > 18){
            HeadStr.popMsg('题目最长18字');
            return false;
        }else if(description.length > 200){
            HeadStr.popMsg('描述超过限制字数');
            return false;
        }else{
            HeadStr.loadingStart();
            return true;
        }
    });
</script>
<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
<script type="text/javascript" src="js/wx.js"></script>
</body>
</html>